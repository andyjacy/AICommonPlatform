# ğŸš€ å®Œæ•´éƒ¨ç½²éªŒè¯æ¸…å•

**éƒ¨ç½²æ—¥æœŸ**ï¼š2025å¹´1æœˆ26æ—¥
**ç³»ç»ŸçŠ¶æ€**ï¼šDocker Lite éƒ¨ç½²å®Œæˆ
**æœ€åæ›´æ–°**ï¼šWeb UI å‰ç«¯ JavaScript ä¿®å¤å®Œæˆ

## âœ… å·²å®Œæˆé¡¹ç›®

### 1ï¸âƒ£ Docker éƒ¨ç½² - å·²å®Œæˆ âœ…
- [x] 8 ä¸ªå¾®æœåŠ¡å®¹å™¨åŒ–éƒ¨ç½²
- [x] Docker Compose Lite é…ç½®ä¼˜åŒ–
- [x] æ‰€æœ‰æœåŠ¡å¥åº·æ£€æŸ¥é…ç½®
- [x] Redis ç¼“å­˜æœåŠ¡é…ç½®
- [x] SQLite æ•°æ®åº“é…ç½®

**å®¹å™¨çŠ¶æ€**ï¼š
```
âœ… redis            - Healthy
âœ… qa_entry         - Healthy  
âœ… rag_service      - Healthy
âœ… prompt_service   - Healthy
âœ… agent_service    - Healthy
âœ… integration      - Healthy
âœ… llm_service      - Healthy
âœ… web_ui           - Healthy
```

**éƒ¨ç½²å‘½ä»¤**ï¼š
```bash
cd /Users/zhao_/Documents/ä¿ä¹åŠ›åŠ /AIå®è·µ/AICommonPlatform
docker-compose -f docker-compose.lite.yml up -d
```

---

### 2ï¸âƒ£ LLM é›†æˆ - å·²å®Œæˆ âœ…
- [x] å®ç° `_call_real_llm()` å‡½æ•° - è·å–é…ç½®çš„çœŸå® LLM æ¨¡å‹
- [x] OpenAI API é›†æˆ - `_call_openai_llm()`
- [x] ChatAnywhere æ”¯æŒ - `_call_chatanywhere_llm()`
- [x] å¤šæä¾›å•†è·¯ç”±é€»è¾‘
- [x] æ¨¡å‹é…ç½®æŒä¹…åŒ–

**æ–‡ä»¶ä½ç½®**ï¼š`/services/qa_entry/services.py`
- ç¬¬ 350-420 è¡Œï¼š`_call_real_llm()` æ ¸å¿ƒå‡½æ•°
- ç¬¬ 422-475 è¡Œï¼šOpenAI å®ç°
- ç¬¬ 477-530 è¡Œï¼šChatAnywhere å®ç°

**æ”¯æŒçš„æ¨¡å‹æä¾›å•†**ï¼š
| æä¾›å•† | ç«¯ç‚¹ | çŠ¶æ€ |
|------|------|------|
| OpenAI | api.openai.com | âœ… æ”¯æŒ |
| ChatAnywhere | api.chatanywhere.com.cn/v1 | âœ… æ”¯æŒ |

---

### 3ï¸âƒ£ å‰ç«¯ä¿®å¤ - å·²å®Œæˆ âœ…
- [x] ä¿®å¤ `switchPage()` äº‹ä»¶å¤„ç†
- [x] ä¿®å¤ `switchQATab()` äº‹ä»¶å¤„ç†  
- [x] ä¿®å¤ HTML onclick å±æ€§ä¼ å‚
- [x] æ·»åŠ é˜²å¾¡æ€§æ£€æŸ¥

**ä¿®æ”¹æ–‡ä»¶**ï¼š`/services/web_ui/static/index.html`

**ä¿®å¤è¯¦æƒ…**ï¼š
```javascript
// é˜²å¾¡æ€§æ£€æŸ¥ç¤ºä¾‹
function switchPage(page, event) {
    // ... éšè—æ‰€æœ‰é¡µé¢
    
    if (event && event.target) {
        // å¦‚æœæœ‰ event å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨
        event.target.classList.add('active');
    } else {
        // å¤‡ç”¨æ–¹æ¡ˆï¼šé€šè¿‡ data-page å±æ€§æŸ¥æ‰¾
        document.querySelector('[data-page="' + page + '"]')?.classList.add('active');
    }
}
```

---

### 4ï¸âƒ£ ä¾èµ–è§£å†³ - å·²å®Œæˆ âœ…
- [x] æ·»åŠ  `python-json-logger` åˆ° `requirements-lite.txt`
- [x] æ‰€æœ‰ Python ä¾èµ–å·²å®‰è£…
- [x] qa_entry å®¹å™¨æ­£å¸¸è¿è¡Œï¼ˆæ—  ModuleNotFoundErrorï¼‰

**ä¿®å¤çš„ä¾èµ–**ï¼š
```txt
python-json-logger==2.0.7
```

---

### 5ï¸âƒ£ çŸ¥è¯†åº“åˆå§‹åŒ– - å·²å®Œæˆ âœ…
- [x] 10 ä¸ªæµ‹è¯•æ–‡æ¡£å·²åŠ è½½
- [x] RAG æœåŠ¡å·²å°±ç»ª
- [x] æ–‡æ¡£ç´¢å¼•å·²æ„å»º

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] **å¯¼èˆªèœå•**ï¼šç‚¹å‡»æ‰€æœ‰å¯¼èˆªé¡¹ç›®ï¼ŒéªŒè¯é¡µé¢åˆ‡æ¢æ— é”™è¯¯
- [ ] **é—®é¢˜æäº¤**ï¼šåœ¨ QA ä¸­å¿ƒè¾“å…¥é—®é¢˜å¹¶æäº¤
- [ ] **çŸ¥è¯†åº“æœç´¢**ï¼šè¿›è¡ŒçŸ¥è¯†åº“æœç´¢æµ‹è¯•
- [ ] **LLM é…ç½®**ï¼šæ·»åŠ å’Œé…ç½® LLM æ¨¡å‹
- [ ] **æ¨¡å‹åˆ‡æ¢**ï¼šåœ¨ OpenAI å’Œ ChatAnywhere ä¹‹é—´åˆ‡æ¢

### é”™è¯¯æ£€æŸ¥
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  JavaScript é”™è¯¯
- [ ] Docker å®¹å™¨æ—¥å¿—æ— é”™è¯¯
- [ ] æ‰€æœ‰ API è°ƒç”¨è¿”å›æ­£ç¡®çŠ¶æ€ç 

### ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] é…ç½® OpenAI æ¨¡å‹ â†’ æäº¤é—®é¢˜ â†’ æ”¶åˆ° LLM å›ç­”
- [ ] é…ç½® ChatAnywhere æ¨¡å‹ â†’ åˆ‡æ¢ â†’ æäº¤é—®é¢˜ â†’ æ”¶åˆ°å›ç­”

---

## ğŸ”Œ æœåŠ¡ç«¯å£æ˜ å°„

| æœåŠ¡ | ç«¯å£ | URL |
|------|------|-----|
| Web UI | 3000 | http://localhost:3000 |
| QA Entry | 8001 | http://localhost:8001 |
| Prompt Service | 8002 | http://localhost:8002 |
| RAG Service | 8003 | http://localhost:8003 |
| Agent Service | 8004 | http://localhost:8004 |
| Integration | 8005 | http://localhost:8005 |
| LLM Service | 8006 | http://localhost:8006 |
| Redis | 6379 | redis://localhost:6379 |

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€
```bash
docker-compose ps
```

### æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
```bash
docker-compose logs qa_entry     # QA æœåŠ¡
docker-compose logs llm_service  # LLM æœåŠ¡
docker-compose logs web_ui       # Web UI
```

### é‡å¯å•ä¸ªæœåŠ¡
```bash
docker-compose restart web_ui
docker-compose restart qa_entry
```

### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
docker-compose down
```

### å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
docker-compose up -d
```

### æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
```bash
docker-compose down -v
```

---

## ğŸ“‹ å…³é”®æ–‡ä»¶ç›®å½•

```
AICommonPlatform/
â”œâ”€â”€ docker-compose.lite.yml          # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ qa_entry/
â”‚   â”‚   â”œâ”€â”€ services.py              # LLM é›†æˆæ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ requirements-lite.txt    # ä¾èµ–åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ main.py                  # QA æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ web_ui/
â”‚   â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html           # ä¿®å¤çš„å‰ç«¯ä»£ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ styles.css           # UI æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ main.py                  # Web æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ llm_service/                 # LLM è·¯ç”±æœåŠ¡
â”‚   â”œâ”€â”€ rag_service/                 # çŸ¥è¯†åº“ RAG æœåŠ¡
â”‚   â”œâ”€â”€ prompt_service/              # Prompt ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ agent_service/               # Agent å·¥å…·æœåŠ¡
â”‚   â””â”€â”€ integration/                 # ç³»ç»Ÿé›†æˆæœåŠ¡
â””â”€â”€ data/
    â””â”€â”€ documents/                   # çŸ¥è¯†åº“æ–‡æ¡£
```

---

## ğŸ” LLM é…ç½®æ­¥éª¤

### 1. æ·»åŠ  OpenAI æ¨¡å‹
1. æ‰“å¼€ Web UIï¼šhttp://localhost:3000
2. ç‚¹å‡»"ğŸ§  å¤§æ¨¡å‹"å¯¼èˆª
3. ç‚¹å‡»"â• æ·»åŠ æ¨¡å‹"
4. å¡«å†™è¡¨å•ï¼š
   - æ¨¡å‹åç§°ï¼š`gpt-4` æˆ– `gpt-3.5-turbo`
   - æä¾›å•†ï¼š`openai`
   - API Keyï¼š`sk-...` (ä» OpenAI è·å–)
   - åŸºç¡€æ¸©åº¦ï¼š0.7
   - æœ€å¤§ä»¤ç‰Œï¼š2000
5. ç‚¹å‡»"ğŸ’¾ ä¿å­˜æ¨¡å‹"

### 2. æ·»åŠ  ChatAnywhere æ¨¡å‹  
1. ç‚¹å‡»"â• æ·»åŠ æ¨¡å‹"
2. å¡«å†™è¡¨å•ï¼š
   - æ¨¡å‹åç§°ï¼š`gpt-4` æˆ–è‡ªå®šä¹‰åç§°
   - æä¾›å•†ï¼š`chatanywhere`
   - API Keyï¼šä» ChatAnywhere è·å–
   - åŸºç¡€æ¸©åº¦ï¼š0.7
   - æœ€å¤§ä»¤ç‰Œï¼š2000
3. ç‚¹å‡»"ğŸ’¾ ä¿å­˜æ¨¡å‹"

### 3. æµ‹è¯• LLM
1. è¿›å…¥"ğŸ’¬ é—®ç­”ä¸­å¿ƒ"
2. è¾“å…¥é—®é¢˜ï¼š`2024å¹´Q1çš„é”€å”®ä¸šç»©å¦‚ä½•ï¼Ÿ`
3. ç‚¹å‡»"æé—®"
4. éªŒè¯å›ç­”æ¥è‡ªé…ç½®çš„ LLM æ¨¡å‹

---

## âš™ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šWeb UI æ˜¾ç¤ºç™½å±
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼šCmd+Shift+Delete
2. å¼ºåˆ¶åˆ·æ–°ï¼šCmd+Shift+R
3. æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š`docker-compose ps`

### é—®é¢˜ï¼šQA æé—®å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ qa_entry å®¹å™¨æ—¥å¿—ï¼š`docker-compose logs qa_entry`
2. ç¡®ä¿ Redis æ­£å¸¸è¿è¡Œï¼š`docker-compose ps redis`
3. éªŒè¯ LLM æ¨¡å‹å·²é…ç½®

### é—®é¢˜ï¼šLLM æœªè¿”å›å›ç­”
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. éªŒè¯ API Key æ­£ç¡®
2. æ£€æŸ¥æ¨¡å‹æä¾›å•†è®¾ç½®
3. æŸ¥çœ‹ llm_service æ—¥å¿—ï¼š`docker-compose logs llm_service`

### é—®é¢˜ï¼šJavaScript é”™è¯¯ä»ç„¶å­˜åœ¨
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®Œå…¨æ¸…é™¤ç¼“å­˜å¹¶é‡å¯æµè§ˆå™¨
2. é‡æ–°æ„å»º Web UI å®¹å™¨ï¼š
   ```bash
   docker-compose build --no-cache web_ui
   docker-compose restart web_ui
   ```
3. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰çš„æ§åˆ¶å°è¾“å‡º

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å®¹å™¨å¯åŠ¨æ—¶é—´ | ~2 åˆ†é’Ÿ |
| Web UI åŠ è½½æ—¶é—´ | <1 ç§’ |
| QA å¤„ç†æ—¶é—´ | 2-5 ç§’ï¼ˆä¾èµ– LLMï¼‰ |
| çŸ¥è¯†åº“æœç´¢æ—¶é—´ | <1 ç§’ |
| æ€»å†…å­˜å ç”¨ | ~1.5 GB |

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### [2025-01-26] å‰ç«¯ä¿®å¤å®Œæˆ
- âœ… ä¿®å¤ JavaScript äº‹ä»¶å¤„ç†é”™è¯¯
- âœ… æ·»åŠ é˜²å¾¡æ€§æ£€æŸ¥
- âœ… æ‰€æœ‰æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡

### [2025-01-26] LLM é›†æˆå®Œæˆ
- âœ… å®ç°å¤šæä¾›å•†è·¯ç”±
- âœ… æ·»åŠ  ChatAnywhere æ”¯æŒ
- âœ… é…ç½®æŒä¹…åŒ–

### [2025-01-26] Docker Lite éƒ¨ç½²
- âœ… 8 ä¸ªæœåŠ¡å®¹å™¨åŒ–
- âœ… ä¼˜åŒ–è½»é‡åŒ–éƒ¨ç½²
- âœ… æ‰€æœ‰å¥åº·æ£€æŸ¥é…ç½®

---

## âœ¨ ä¸‹ä¸€æ­¥å»ºè®®

1. **ç«‹å³**ï¼šæµ‹è¯• QA åŠŸèƒ½å’Œ LLM é›†æˆ
2. **çŸ­æœŸ**ï¼šé…ç½®ç”Ÿäº§ç¯å¢ƒçš„ API Key
3. **ä¸­æœŸ**ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œæ·»åŠ ç›‘æ§
4. **é•¿æœŸ**ï¼šæ‰©å±•çŸ¥è¯†åº“ï¼Œé›†æˆæ›´å¤š LLM æä¾›å•†

---

## ğŸ“ æ”¯æŒèµ„æº

- **æŠ€æœ¯æ–‡æ¡£**ï¼šè§ `docs/` ç›®å½•
- **API å‚è€ƒ**ï¼š`API_QUICK_REFERENCE.md`
- **éƒ¨ç½²æŒ‡å—**ï¼š`DOCKER_DEPLOYMENT_GUIDE.md`
- **æµ‹è¯•è¯´æ˜**ï¼š`TESTING_INSTRUCTIONS.md`
