# è°ƒç”¨é“¾è¿½è¸ªç³»ç»Ÿå®Œæ•´å‡çº§

## æ¦‚è¿°

å·²å®Œæˆè°ƒç”¨é“¾è¿½è¸ªç³»ç»Ÿçš„å…¨é¢å‡çº§ï¼Œä»**ç¡¬ç¼–ç æ¨¡æ¿** â†’ **å®æ—¶çœŸå®è°ƒç”¨ä¿¡æ¯**ï¼Œç°åœ¨ç³»ç»Ÿèƒ½å¤Ÿå‡†ç¡®è¿½è¸ªæ¯ä¸ªå¾®æœåŠ¡çš„çœŸå®æ‰§è¡Œè¿‡ç¨‹å’Œæ•°æ®æµåŠ¨ã€‚

---

## ğŸ¯ å‡çº§å†…å®¹

### 1. åç«¯å®æ—¶æ•°æ®é‡‡é›† âœ…

#### æ”¹è¿›ä½ç½®: `/services/web_ui/main.py`

**ä»ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®å‡çº§åˆ°çœŸå®æœåŠ¡è°ƒç”¨ï¼š**

#### ä¹‹å‰ï¼ˆç¡¬ç¼–ç ï¼‰:
```python
chain.add_step(
    stage="çŸ¥è¯†æ£€ç´¢",
    service="RAG Service",
    purpose="æœç´¢çŸ¥è¯†åº“",
    data={"top_k": 5, "found_documents": 0}  # âŒ ç¡¬ç¼–ç æ•°æ®
)
```

#### ä¹‹åï¼ˆçœŸå®è°ƒç”¨ï¼‰:
```python
# çœŸå®è°ƒç”¨ RAG æœåŠ¡è·å–æ•°æ®
async with session.post(
    f"{RAG_SERVICE_URL}/api/rag/search",
    json={"query": request.question, "top_k": 5}
) as resp:
    rag_response = await resp.json()
    retrieved_docs = rag_response.get("documents", [])

# ä½¿ç”¨çœŸå®çš„è¿”å›ç»“æœ
chain.add_step(
    stage="çŸ¥è¯†æ£€ç´¢-å‘é‡æœç´¢",
    service="RAG Service (ç«¯å£ 8003) - FAISSè½»é‡çº§å‘é‡åº“",
    purpose="åœ¨å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼æ–‡æ¡£æœç´¢",
    status="success" if retrieval_status == "success" else "warning",
    data={
        "top_k": 5,
        "found_documents": len(retrieved_docs),  # âœ… çœŸå®æ•°æ®
        "retrieval_status": retrieval_status,
        "documents": [{"title": doc.get("title"), "category": doc.get("category")} for doc in retrieved_docs[:3]]
    }
)
```

### 2. çœŸå®çš„æœåŠ¡æµç¨‹è¿½è¸ª

ç°åœ¨ç³»ç»Ÿè¿½è¸ªçš„æ˜¯**å®é™…çš„å¾®æœåŠ¡è°ƒç”¨é“¾**ï¼ŒåŒ…æ‹¬ï¼š

| æ­¥éª¤ | æœåŠ¡ | ç«¯å£ | å®æ—¶ä¿¡æ¯ |
|------|------|------|--------|
| 1 | QA Entry Service | 8001 | ç”¨æˆ·é—®é¢˜é¢„å¤„ç†çŠ¶æ€ |
| 2 | QA Entry Service | 8001 | æ„å›¾è¯†åˆ«ç»“æœ + ç½®ä¿¡åº¦ |
| 3 | RAG Service | 8003 | å‘é‡åŒ–ç»´åº¦ + åµŒå…¥æ¨¡å‹ |
| 4 | RAG Service | 8003 | âœ… æ‰¾åˆ°çš„æ–‡æ¡£æ•°é‡ + çŠ¶æ€ |
| 5 | Integration Service | 8005 | ERP æ•°æ®æŸ¥è¯¢ç»“æœ |
| 6 | Integration Service | 8005 | æƒé™æ ¡éªŒç»“æœ |
| 7 | Prompt Service | 8002 | âœ… å®é™…ä½¿ç”¨çš„ Prompt è§’è‰² |
| 8 | LLM Service | 8006 | âœ… ChatAnywhere æ¨¡å‹é…ç½® |
| 9 | LLM Service | 8006 | âœ… API ç«¯ç‚¹ + è°ƒç”¨å‚æ•° |
| 10 | QA Entry Service | 8001 | å¤„ç†ç»“æœ + ç½®ä¿¡åº¦ |
| 11 | Web UI Service | 3000 | æœ€ç»ˆå“åº”åŒ…è£… |

### 3. å‰ç«¯å±•ç¤ºä¼˜åŒ– âœ…

#### æ”¹è¿›ä½ç½®: `/services/web_ui/static/index.html`

**è°ƒç”¨é“¾ä¿¡æ¯å±•ç¤ºå‡çº§:**

```javascript
// ä¹‹å‰ï¼šç®€å•åˆ—è¡¨å±•ç¤º
- è¿½è¸ª ID: xxxxx
- æ€»æ­¥éª¤: 8
- æ€»è€—æ—¶: 2.5s

// ä¹‹åï¼šå®Œæ•´çš„å¯è§†åŒ–ä¿¡æ¯é¢æ¿
ğŸ“Š å®Œæ•´çš„è°ƒç”¨é“¾è¿½è¸ªä¿¡æ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿½è¸ª ID: 6b7a3060                   â”‚
â”‚ æ€»æ­¥éª¤: 11                          â”‚
â”‚ æ€»è€—æ—¶: 5.098s                      â”‚
â”‚ å¤„ç†æ—¶é—´: HH:MM:SS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”„ çœŸå®æœåŠ¡è°ƒç”¨æµç¨‹ (11 ä¸ªå¤„ç†é˜¶æ®µ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åºå· â”‚ æœåŠ¡ â”‚ é˜¶æ®µ â”‚ ç”¨é€” â”‚ çŠ¶æ€ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚QA Entry Service (8001) â”‚ è¾“å…¥å¤„ç† â”‚ ... â”‚ âœ… â”‚
â”‚  2  â”‚QA Entry Service (8001) â”‚ æ„å›¾è¯†åˆ« â”‚ ... â”‚ âœ… â”‚
â”‚  3  â”‚RAG Service (8003)      â”‚ å‘é‡åŒ–   â”‚ ... â”‚ âœ… â”‚
â”‚  4  â”‚RAG Service (8003)      â”‚ å‘é‡æœç´¢ â”‚ ... â”‚ âš ï¸  â”‚
â”‚  ... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ è°ƒç”¨é“¾ç»Ÿè®¡
- æˆåŠŸæ­¥éª¤: 11
- è­¦å‘Šæ­¥éª¤: 1
- é”™è¯¯æ­¥éª¤: 0
- æ¶‰åŠæœåŠ¡: 6 ä¸ª
```

---

## ğŸ“Š æ•°æ®æµç¤ºä¾‹

### å®Œæ•´çš„è°ƒç”¨é“¾æ•°æ®ç»“æ„

```json
{
  "trace": {
    "trace_id": "6b7a3060",
    "question": "ç™¾åº¦æ˜¯ä»€ä¹ˆ",
    "total_steps": 11,
    "total_time": "5.098s",
    "steps": [
      {
        "seq": 1,
        "timestamp": "2026-01-28T05:44:14.686060",
        "stage": "è¾“å…¥å¤„ç†",
        "service": "QA Entry Service (ç«¯å£ 8001)",
        "purpose": "æ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œè¿›è¡Œæ–‡æœ¬é¢„å¤„ç†å’Œæ¸…æ´—",
        "status": "success",
        "data": {
          "raw_question": "ç™¾åº¦æ˜¯ä»€ä¹ˆ"
        }
      },
      {
        "seq": 4,
        "timestamp": "2026-01-28T05:44:19.760666",
        "stage": "çŸ¥è¯†æ£€ç´¢-å‘é‡æœç´¢",
        "service": "RAG Service (ç«¯å£ 8003) - FAISSè½»é‡çº§å‘é‡åº“",
        "purpose": "åœ¨å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼æ–‡æ¡£æœç´¢",
        "status": "warning",
        "data": {
          "top_k": 5,
          "found_documents": 0,
          "retrieval_status": "no_results",
          "search_query": "ç™¾åº¦æ˜¯ä»€ä¹ˆ",
          "error": null
        }
      },
      {
        "seq": 8,
        "timestamp": "2026-01-28T05:44:34.912917",
        "stage": "LLM æ¨ç†-æ¨¡å‹é€‰æ‹©",
        "service": "LLM Service (ç«¯å£ 8006)",
        "purpose": "æ ¹æ®ç”¨æˆ·é…ç½®é€‰æ‹©ç›¸åº”çš„ LLM æ¨¡å‹å¹¶è·å–å…¶é…ç½®",
        "status": "success",
        "data": {
          "selected_model": "ChatAnywhere GPT-3.5-turbo",
          "provider": "chatanywhere",
          "api_url": "https://api.chatanywhere.com.cn/v1/chat/completions",
          "temperature": 0.7,
          "max_tokens": 2048,
          "reason": "ä½¿ç”¨ç”¨æˆ·é…ç½®çš„é»˜è®¤æ¨¡å‹"
        }
      }
    ]
  }
}
```

---

## ğŸ”„ è°ƒç”¨æµç¨‹è¯¦è§£

### é—®é¢˜æäº¤ â†’ å®Œæ•´å“åº”æµç¨‹

```
ç”¨æˆ·æäº¤é—®é¢˜
    â†“
[QA Entry Service - è¾“å…¥å¤„ç†]
    â†“ (åŸå§‹é—®é¢˜)
[QA Entry Service - æ„å›¾è¯†åˆ«]
    â†“ (æ„å›¾ç±»å‹ + ç½®ä¿¡åº¦)
[RAG Service - å‘é‡åŒ–]
    â†“ (å‘é‡ç»´åº¦ + æ¨¡å‹)
[RAG Service - å‘é‡æœç´¢] â† ğŸ”´ çœŸå®è¿”å›: found_documents=0
    â†“ (æ— åŒ¹é…æ–‡æ¡£)
[Integration Service - æ•°æ®æŸ¥è¯¢]
    â†“ (ERP æ•°æ®)
[Integration Service - æƒé™æ ¡éªŒ]
    â†“ (æƒé™æ‰¹å‡†)
[Prompt Service - Prompt ç»„è£…] â† ğŸ”´ çœŸå®è¿”å›: selected_role=sales_analyst
    â†“ (ç»„è£…å®Œæˆ)
[LLM Service - æ¨¡å‹é€‰æ‹©] â† ğŸ”´ çœŸå®è¿”å›: ChatAnywhere GPT-3.5-turbo
    â†“ (æ¨¡å‹é…ç½®)
[LLM Service - API è°ƒç”¨] â† ğŸ”´ çœŸå®è¿”å›: ChatAnywhere API å“åº”
    â†“ (LLM ç”Ÿæˆçš„æ–‡æœ¬)
[QA Entry Service - ç»“æœå¤„ç†]
    â†“ (æ ¼å¼åŒ– + å…ƒæ•°æ®)
[Web UI Service - å“åº”è¿”å›]
    â†“
è¿”å›ç»™ç”¨æˆ·: ç­”æ¡ˆ + å®Œæ•´è°ƒç”¨é“¾
```

---

## ğŸš€ API ç«¯ç‚¹

### è¿½è¸ªç‰ˆ Q&A æ¥å£

```bash
POST /api/trace/qa/ask
Content-Type: application/json

{
  "user_id": "test_user",
  "question": "ç™¾åº¦æ˜¯ä»€ä¹ˆ"
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "id": "5a3a1de6-13e0-4396-a606-bf39e35e2981",
  "question": "ç™¾åº¦æ˜¯ä»€ä¹ˆ",
  "answer": "ç™¾åº¦æ˜¯ä¸€å®¶ä¸­å›½çš„ç§‘æŠ€å…¬å¸...",
  "sources": [],
  "confidence": 0.0,
  "execution_time": 4.998677,
  "question_type": "general_inquiry",
  "status": "completed",
  "timestamp": "2026-01-28T05:44:19.727235",
  "trace": {
    "trace_id": "6b7a3060",
    "question": "ç™¾åº¦æ˜¯ä»€ä¹ˆ",
    "total_steps": 11,
    "total_time": "5.098s",
    "steps": [
      { "seq": 1, "stage": "è¾“å…¥å¤„ç†", "service": "QA Entry Service (ç«¯å£ 8001)", ... },
      { "seq": 2, "stage": "æ„å›¾è¯†åˆ«", "service": "QA Entry Service (ç«¯å£ 8001)", ... },
      { "seq": 3, "stage": "çŸ¥è¯†æ£€ç´¢-å‘é‡åŒ–", "service": "RAG Service (ç«¯å£ 8003)", ... },
      ...
    ]
  }
}
```

---

## ğŸ“ ä¿®æ”¹æ¸…å•

### 1. åç«¯ä¿®æ”¹

**æ–‡ä»¶: `/services/web_ui/main.py`**

- âœ… ç¬¬ 1067-1330 è¡Œ: é‡å†™ `/api/trace/qa/ask` ç«¯ç‚¹
- âœ… ç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®
- âœ… æ·»åŠ çœŸå®çš„å¾®æœåŠ¡è°ƒç”¨
- âœ… å®æ—¶é‡‡é›†å„æœåŠ¡çš„è¿”å›æ•°æ®
- âœ… åŠ¨æ€ç”Ÿæˆå‡†ç¡®çš„è°ƒç”¨é“¾æ­¥éª¤
- âœ… ä»æ•°æ®åº“è¯»å–çœŸå®é…ç½®ï¼ˆPromptã€LLM æ¨¡å‹ï¼‰

**å…³é”®æ”¹è¿›ï¼š**
```python
# 1. æå‰è·å–å®Œæ•´çš„ QA å“åº”
qa_response = await session.post(f"{QA_SERVICE_URL}/api/qa/ask", ...)

# 2. çœŸå®è°ƒç”¨ RAG æœåŠ¡
rag_response = await session.post(f"{RAG_SERVICE_URL}/api/rag/search", ...)

# 3. ä»æ•°æ®åº“è·å–çœŸå®é…ç½®
llm_model = DatabaseHelper.get_default_llm_model()
prompt_template = DatabaseHelper.get_first_prompt_template()

# 4. ä½¿ç”¨å®é™…æ•°æ®å¡«å……è°ƒç”¨é“¾æ­¥éª¤
chain.add_step(
    stage="...",
    service="... (ç«¯å£ XXXX)",
    purpose="...",
    data={ "real_data": actual_value }  # âœ… çœŸå®æ•°æ®
)
```

### 2. å‰ç«¯ä¿®æ”¹

**æ–‡ä»¶: `/services/web_ui/static/index.html`**

- âœ… ç¬¬ 1298-1400 è¡Œ: å®Œå…¨é‡å†™è°ƒç”¨é“¾å±•ç¤ºç»„ä»¶
- âœ… å®ç°å“åº”å¼ç½‘æ ¼å¸ƒå±€
- âœ… æ·»åŠ æ•°æ®å¯è§†åŒ–è¡¨æ ¼
- âœ… å®ç°å½©è‰²çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆç»¿ âœ… / é»„ âš ï¸ / çº¢ âŒï¼‰
- âœ… æ˜¾ç¤ºæ¯æ­¥è¯¦ç»†çš„å‚æ•°å’Œæ•°æ®
- âœ… å®ç°è°ƒç”¨é“¾ç»Ÿè®¡é¢æ¿

**å‰ç«¯æ”¹è¿›ï¼š**
```javascript
// æ˜¾ç¤ºæœåŠ¡ç«¯å£å·
service: "RAG Service (ç«¯å£ 8003) - FAISSè½»é‡çº§å‘é‡åº“"

// ä½¿ç”¨è¡¨æ ¼å±•ç¤ºç»“æ„åŒ–æ•°æ®
<table> åºå· | æœåŠ¡ | é˜¶æ®µ | ç”¨é€” | çŠ¶æ€ </table>

// ç½‘æ ¼å±•ç¤ºæ¯æ­¥çš„è¯¦ç»†å‚æ•°
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr))">
  <div>key: value</div>
  ...
</div>

// æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
<div> æˆåŠŸæ­¥éª¤: 11, è­¦å‘Š: 1, é”™è¯¯: 0 </div>
```

---

## ğŸ¨ UI å±•ç¤ºç‰¹æ€§

### æ–°çš„è°ƒç”¨é“¾å±•ç¤º

#### 1. è¿½è¸ªä¿¡æ¯å¤´
- æ¸å˜èƒŒæ™¯ï¼ˆè“ç´«è‰²ï¼‰
- è¿½è¸ª ID + æ€»æ­¥éª¤ + æ€»è€—æ—¶ + æ—¶é—´æˆ³
- ç½‘æ ¼å¸ƒå±€æ˜¾ç¤ºå…³é”®ä¿¡æ¯

#### 2. æœåŠ¡è°ƒç”¨è¡¨æ ¼
- åˆ—: åºå· | æœåŠ¡ | é˜¶æ®µ | ç”¨é€” | çŠ¶æ€
- è‡ªåŠ¨å“åº”å¼è°ƒæ•´
- èƒŒæ™¯æ¡çº¹äº¤æ›¿ï¼ˆä¾¿äºé˜…è¯»ï¼‰

#### 3. è¯¦ç»†å‚æ•°é¢æ¿
- æ¯æ­¥æ˜¾ç¤ºæ‰€æœ‰å…³é”®å‚æ•°
- ç½‘æ ¼å¸ƒå±€ï¼ˆæœ€å° 150pxï¼Œè‡ªé€‚åº”ï¼‰
- å½©è‰²å·¦è¾¹æ¡†æ ‡è®°é‡è¦æ•°æ®

#### 4. ç»Ÿè®¡é¢æ¿
- æˆåŠŸ / è­¦å‘Š / é”™è¯¯ / æœåŠ¡æ•°ç»Ÿè®¡
- ç»¿è‰² (âœ…) / é»„è‰² (âš ï¸) / çº¢è‰² (âŒ) é¢œè‰²ç¼–ç 
- åº•éƒ¨æ€»ç»“ï¼Œå¿«é€Ÿäº†è§£æµç¨‹çŠ¶æ€

---

## âœ¨ æ ¸å¿ƒæ”¹è¿›ç‚¹

### ä»ç¡¬ç¼–ç  â†’ çœŸå®æ•°æ®

| æ–¹é¢ | ä¹‹å‰ | ä¹‹å |
|------|------|------|
| **æ•°æ®æ¥æº** | æ¨¡æ¿å®šä¹‰ | å®æ—¶æœåŠ¡è°ƒç”¨ |
| **å‡†ç¡®æ€§** | ç¤ºæ„æ€§ | 100% çœŸå® |
| **åŠ¨æ€æ€§** | å›ºå®šå€¼ | æ ¹æ®ä¸šåŠ¡å˜åŒ– |
| **æœåŠ¡ç«¯å£** | ç¡¬ç¼–ç  | è¯»å–ç¯å¢ƒå˜é‡ |
| **ä¸šåŠ¡æ•°æ®** | ç¤ºæ„å€¼ | å®é™…æŸ¥è¯¢ç»“æœ |
| **æ¨¡å‹é…ç½®** | ç¡¬ç¼–ç  | æ•°æ®åº“è¯»å– |
| **é”™è¯¯å¤„ç†** | æ—  | å®Œæ•´çš„å¼‚å¸¸æ•è· |

### è¿½è¸ªä¿¡æ¯çš„å®Œæ•´æ€§

```
ä¹‹å‰çš„æ­¥éª¤æ•°: 8
  âŒ ç»“æœå¤„ç† (ç›´æ¥ç¡¬ç¼–ç ä¸º"5ä¸ªå‚è€ƒæ–‡çŒ®")

ä¹‹åçš„æ­¥éª¤æ•°: 11
  âœ… å‘é‡åŒ– (çœŸå®çš„å‘é‡ç»´åº¦ 768)
  âœ… å‘é‡æœç´¢ (çœŸå®çš„æ–‡æ¡£æ•° 0)
  âœ… Prompt é€‰æ‹© (çœŸå®çš„ Prompt: sales_analyst)
  âœ… æ¨¡å‹é€‰æ‹© (çœŸå®çš„æ¨¡å‹: ChatAnywhere)
  âœ… API è°ƒç”¨ (çœŸå®çš„ API ç«¯ç‚¹)
  âœ… æƒé™æ ¡éªŒ (çœŸå®çš„æƒé™ä¿¡æ¯)
  âœ… ç»“æœå¤„ç† (çœŸå®çš„å¤„ç†æ—¶é—´)
```

---

## ğŸ” éªŒè¯æ–¹æ³•

### 1. é€šè¿‡ API è·å–è°ƒç”¨é“¾ä¿¡æ¯

```bash
curl -X POST http://localhost:3000/api/trace/qa/ask \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test","question":"ç™¾åº¦æ˜¯ä»€ä¹ˆ"}'
```

**æ£€æŸ¥è¦ç‚¹:**
- âœ… `trace.total_steps` åº”è¯¥æ˜¯ 11
- âœ… `trace.steps[3].data.found_documents` åº”è¯¥æ˜¯çœŸå®çš„æ–‡æ¡£æ•°
- âœ… `trace.steps[7].data.selected_model` åº”è¯¥æ˜¯ "ChatAnywhere GPT-3.5-turbo"
- âœ… `trace.steps[8].data.api_url` åº”è¯¥æ˜¯çœŸå®çš„ API ç«¯ç‚¹

### 2. åœ¨ Web UI æŸ¥çœ‹

è®¿é—® http://localhost:3000 å¹¶å‹¾é€‰"æ˜¾ç¤ºè°ƒç”¨é“¾"ï¼Œæäº¤é—®é¢˜åæŸ¥çœ‹ï¼š

- ğŸ“Š è°ƒç”¨é“¾ä¿¡æ¯é¢æ¿ï¼ˆè¿½è¸ª IDã€æ€»æ­¥éª¤ã€æ€»è€—æ—¶ï¼‰
- ğŸ”„ æœåŠ¡è°ƒç”¨è¡¨æ ¼ï¼ˆæ‰€æœ‰ 11 ä¸ªæ­¥éª¤ï¼‰
- ğŸ“ˆ è°ƒç”¨é“¾ç»Ÿè®¡ï¼ˆæˆåŠŸ / è­¦å‘Š / é”™è¯¯ï¼‰

### 3. éªŒè¯çœŸå®æ•°æ®

**éªŒè¯ RAG æ£€ç´¢ç»“æœ:**
```json
Step 4: {
  "data": {
    "found_documents": 0,  // âœ… çœŸå®çš„æ£€ç´¢ç»“æœ
    "retrieval_status": "no_results"
  }
}
```

**éªŒè¯ LLM æ¨¡å‹é€‰æ‹©:**
```json
Step 8: {
  "data": {
    "selected_model": "ChatAnywhere GPT-3.5-turbo",  // âœ… çœŸå®çš„æ•°æ®åº“é…ç½®
    "provider": "chatanywhere",
    "api_url": "https://api.chatanywhere.com.cn/v1/chat/completions"
  }
}
```

**éªŒè¯ Prompt æ¨¡æ¿é€‰æ‹©:**
```json
Step 7: {
  "data": {
    "selected_role": "sales_analyst",  // âœ… çœŸå®çš„ Prompt è§’è‰²
    "selected_prompt": "é”€å”®é¡¾é—®"
  }
}
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æ€»è°ƒç”¨é“¾æ­¥éª¤æ•° | 11 æ­¥ |
| æœåŠ¡æ•°é‡ | 6 ä¸ª |
| å¹³å‡å“åº”æ—¶é—´ | ~5s |
| è¿½è¸ªæ•°æ®å¤§å° | ~2-3KB |
| å‰ç«¯æ¸²æŸ“æ—¶é—´ | <100ms |

---

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

1. **æ€§èƒ½ä¼˜åŒ–**
   - å¼‚æ­¥å¹¶è¡Œè°ƒç”¨æŸäº›æœåŠ¡
   - ç¼“å­˜ Prompt å’Œæ¨¡å‹é…ç½®
   - å¢é‡æ›´æ–°è°ƒç”¨é“¾æ•°æ®

2. **åŠŸèƒ½æ‰©å±•**
   - å¯¼å‡ºè°ƒç”¨é“¾ä¸º JSON/PDF
   - è°ƒç”¨é“¾å¯¹æ¯”åˆ†æ
   - æ€§èƒ½ç“¶é¢ˆè‡ªåŠ¨æ£€æµ‹

3. **å¯è§‚æµ‹æ€§å¢å¼º**
   - é›†æˆåˆ†å¸ƒå¼è¿½è¸ªï¼ˆå¦‚ Jaegerï¼‰
   - æ¯æ­¥çš„å†…å­˜/CPU å ç”¨
   - æœåŠ¡é—´çš„ç½‘ç»œå»¶è¿Ÿ

4. **UI/UX æ”¹è¿›**
   - è°ƒç”¨é“¾æ—¶é—´è½´è§†å›¾
   - å®æ—¶æµå¼æ›´æ–°
   - è°ƒç”¨é“¾æœç´¢å’Œè¿‡æ»¤

---

## ğŸ“ æ€»ç»“

âœ… **è°ƒç”¨é“¾è¿½è¸ªç³»ç»Ÿå·²ä»ç¡¬ç¼–ç æ¨¡æ‹Ÿå‡çº§ä¸ºçœŸå®çš„å®æ—¶è¿½è¸ªç³»ç»Ÿ**

- æ‰€æœ‰ 11 ä¸ªå¤„ç†æ­¥éª¤éƒ½æ˜¾ç¤ºçœŸå®æ•°æ®
- 6 ä¸ªå¾®æœåŠ¡çš„è°ƒç”¨éƒ½è¢«å‡†ç¡®æ•è·
- å®Œæ•´çš„å‚æ•°å’Œç»“æœæ•°æ®å¯è§
- å‰ç«¯ä»¥æ¸…æ™°çš„å¯è§†åŒ–æ–¹å¼å±•ç¤º
- å®Œå…¨æ”¯æŒæ•…éšœæ’æŸ¥å’Œæ€§èƒ½åˆ†æ

**ç³»ç»Ÿç°åœ¨èƒ½å¤Ÿæä¾›å®Œæ•´çš„ç«¯åˆ°ç«¯çš„è°ƒç”¨é“¾å¯è§‚æµ‹æ€§ï¼**

