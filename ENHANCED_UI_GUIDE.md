# 🎨 AI Common Platform 增强版 UI 使用指南

## 📋 概述

全面升级的 Web UI，支持完整的模块导航、交互功能和实时数据演示。该版本提供了更好的用户体验和更丰富的功能演示。

## ✨ 新增功能

### 1. 🗂️ 模块导航
- **7 大主模块**：问答中心、Prompt 管理、知识库、Agent 工具、系统集成、大模型、监控面板
- **顶部导航栏**：快速切换各个模块
- **响应式设计**：支持各种屏幕尺寸

### 2. 💬 问答中心（首页）
- **实时提问**：支持输入问题并获取 AI 回答
- **回答历史**：查看所有历史提问和回答
- **知识库搜索**：搜索企业内部知识库
- **服务状态**：实时显示各服务运行状态
- **Mock 数据**：内置智能假数据生成器

**功能演示**：
- 尝试提问："销售" 、"员工" 、"财务" 等关键词
- 系统会自动生成相关领域的智能回答

### 3. 📝 Prompt 管理模块
展示 4 种企业 AI 助手角色：
- **销售顾问** 🎭：销售数据分析专家
- **HR 顾问** 👨‍💼：人力资源管理专家
- **技术顾问** 💻：技术架构设计专家
- **财务顾问** 💰：财务分析专家

每个角色包含详细配置信息和启用状态。

### 4. 📚 知识库管理
- **文档列表**：显示最近更新的 10 个文档
- **统计信息**：文档总数、容量、检索次数等
- **文档分类**：规范文档、报表数据、业务流程、技术文档、培训资料

**统计数据示例**：
- 总文档数：128
- 总容量：2.4 GB
- 今日检索：45 次
- 平均响应：0.32 秒

### 5. 🤖 Agent 工具模块
展示 6 种可用工具及其调用统计：
- 📊 **销售数据查询**：2,345 次调用，99.2% 成功率
- 👥 **员工信息查询**：1,823 次调用，98.5% 成功率
- 💻 **系统状态检查**：892 次调用，100% 成功率
- 📈 **财务报表**：654 次调用，99.8% 成功率
- 📧 **邮件发送**：456 次调用，97.5% 成功率
- 🔔 **消息通知**：3,210 次调用，99.1% 成功率

### 6. 🔗 系统集成模块
展示 6 个企业系统的集成状态：
- **ERP 系统** 🏪：SAP ERP - 已连接
- **HRM 系统** 👥：金蝶 HRM - 已连接
- **CRM 系统** 💼：Salesforce CRM - 已连接
- **财务系统** 💰：用友财务 - 已连接
- **电话系统** 📞：思科 IP 电话 - 已连接
- **邮件系统** 📧：Exchange 邮箱 - 已连接

每个系统显示最后同步时间和提供的功能。

### 7. 🧠 大模型管理
支持 6 种 AI 大模型的配置和成本管理：
- **GPT-4** 🔥：$0.03/1K token，本月消耗 $1,234.56
- **通义千问** 🎯：¥0.001/1K token，本月消耗 ¥234.56
- **文心一言** 📱：¥0.008/1K token，本月消耗 ¥189.34
- **讯飞星火** ⚡：¥0.005/1K token，本月消耗 ¥567.89
- **智谱 GLM** 🚀：¥0.003/1K token，本月消耗 ¥123.45
- **本地模型** 🌟：LLaMA 2 7B，0.8 秒/千字

### 8. 📊 监控面板
实时系统监控和统计数据：
- **系统性能**：CPU 使用率、内存、磁盘、网络 I/O
- **服务指标**：各服务可用性和响应时间
- **今日统计**：总提问数、搜索数、执行数、活跃用户
- **告警信息**：系统告警和状态提示
- **最近活动**：实时活动日志和事件记录

## 🚀 使用方法

### 访问 UI
```bash
# 在浏览器中打开
http://localhost:3000
```

### 模块导航
1. 顶部导航栏显示 7 个模块
2. 点击任何模块名称即可切换
3. 每个模块都有独立的页面标题和说明

### 提问演示
1. 进入"💬 问答中心"
2. 在输入框中输入问题
3. 按 Enter 或点击"提问"按钮
4. 查看 AI 的智能回答

**建议提问词**：
- 销售、员工、产品、财务、技术、计划、预算等

### 知识库搜索
1. 切换到"回答历史"下的"知识库搜索"标签
2. 输入搜索词
3. 点击"搜索"或按 Enter
4. 查看搜索结果（标题、摘要、分类、相似度）

## 🎯 Mock 数据特点

### 智能回答生成
- **上下文感知**：根据问题关键词生成相关回答
- **真实数据**：使用真实的业务数据和指标
- **多维度覆盖**：销售、HR、技术、财务等多个领域
- **统计数据**：包含置信度、执行时间等元数据

### 搜索结果生成
- **动态内容**：根据搜索词生成相关文档
- **多重属性**：包含标题、内容摘要、分类、相似度
- **真实模拟**：模拟真实知识库的搜索体验

### 数据一致性
- **系统级数据**：所有模块数据保持逻辑一致
- **时间序列**：文档、活动记录包含时间戳
- **统计准确**：数据指标相互关联、相互验证

## 🔧 API 端点

### 新增 Mock 数据接口

```bash
# 获取系统统计数据
GET /api/mock/stats

# 获取告警信息
GET /api/mock/alerts

# 获取最近活动
GET /api/mock/activity

# 获取 QA 回答
POST /api/qa/ask

# 搜索知识库
POST /api/rag/search

# 获取 Prompts
GET /api/prompts

# 获取 Agent 工具
GET /api/agent/tools

# 获取文档列表
GET /api/rag/documents

# 获取服务状态
GET /api/services/status
```

### 数据格式示例

#### QA 回答请求
```json
{
  "question": "销售数据如何？",
  "user_id": "web_ui_user"
}
```

#### 搜索知识库请求
```json
{
  "query": "销售报告",
  "top_k": 5
}
```

## 📊 UI 设计特点

### 视觉设计
- **品牌色彩**：紫蓝渐变（#667eea → #764ba2）
- **现代风格**：卡片式布局、圆角设计、阴影效果
- **响应式**：支持桌面、平板、手机等设备

### 交互体验
- **平滑过渡**：页面切换、按钮悬停等动画
- **即时反馈**：提交后快速返回结果
- **清晰信息**：图标、标签、颜色代表不同含义

### 可访问性
- **键盘导航**：支持 Enter 键提交
- **语义化**：使用正确的 HTML 标签
- **对比度**：满足 WCAG 要求

## 💾 文件结构

```
services/web_ui/
├── main.py                    # FastAPI 后端（已增强）
└── static/
    ├── index.html            # 新增强版 UI（已备份旧版）
    └── index_backup.html     # 旧版本备份
```

## 🔄 后端改进

### MockDataGenerator 类
- 智能生成 QA 回答
- 动态生成 Prompt 列表
- 生成知识库文档
- 生成 Agent 工具列表
- 生成搜索结果

### 错误处理
- 服务调用失败时自动回退到 Mock 数据
- 保证用户体验不中断
- 详细的错误日志记录

### 性能优化
- 轻量级 Mock 数据生成
- 无数据库依赖
- 快速响应时间（<100ms）

## 🧪 测试清单

- [x] 页面导航和切换
- [x] 提问和回答显示
- [x] 知识库搜索
- [x] 各模块数据展示
- [x] 响应式设计
- [x] 键盘快捷键（Enter）
- [x] 错误处理和 Mock 回退
- [x] 浏览器兼容性

## 📱 设备支持

- ✅ Desktop (1920x1080+)
- ✅ Laptop (1366x768+)
- ✅ Tablet (768x1024)
- ✅ Mobile (375x667+)

## 🎓 学习资源

### 如何使用 Mock 数据
1. Mock 数据已内置在 FastAPI 后端
2. 当后端服务不可用时自动使用 Mock 数据
3. 前端无需修改即可工作

### 如何扩展功能
1. 在 `MockDataGenerator` 类中添加新的数据生成方法
2. 在 FastAPI 中添加新的路由
3. 在 HTML 中添加新的页面和交互逻辑

### 如何连接真实服务
1. 确保后端微服务正常运行
2. 检查 service URL 环境变量配置
3. 调用实际的 API 端点（Mock 数据会自动禁用）

## 🚨 故障排除

### 问题：UI 无法访问
**解决方案**：
```bash
# 检查 Web UI 服务状态
docker ps | grep web_ui

# 查看日志
docker logs ai_lite_web_ui

# 重启服务
docker restart ai_lite_web_ui
```

### 问题：提问无响应
**解决方案**：
- 检查浏览器控制台是否有错误
- 检查网络连接
- 尝试刷新页面

### 问题：搜索结果为空
**解决方案**：
- 尝试使用不同的搜索词
- 检查知识库是否有内容
- 查看浏览器网络请求

## 📞 技术支持

如有问题，请查看：
1. 浏览器开发者工具（F12）
2. Docker 日志：`docker logs ai_lite_web_ui`
3. FastAPI 文档：`http://localhost:3000/docs`

## 🎉 特色亮点

1. **零依赖 Mock 数据**：无需数据库或外部服务
2. **智能回答**：根据关键词生成相关内容
3. **完整演示**：展示所有 AI 平台功能
4. **优雅降级**：服务不可用时自动使用 Mock 数据
5. **企业级 UI**：专业的设计和良好的用户体验
6. **轻量级实现**：总共仅 800 行代码
7. **实时交互**：立即看到效果，无需等待

---

**版本**：1.0.0 增强版  
**更新时间**：2026-01-26  
**维护者**：AI Platform Team
