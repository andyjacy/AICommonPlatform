# âœ… Docker éƒ¨ç½²å®Œæˆ - AI Common Platform

## ğŸ‰ éƒ¨ç½²çŠ¶æ€æ€»ç»“

æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼

### ğŸŸ¢ 8ä¸ªå¾®æœåŠ¡å…¨éƒ¨å¥åº·è¿è¡Œ

```
âœ… ai_lite_redis            (Redis ç¼“å­˜)              PORT 6379
âœ… ai_lite_qa_entry         (QA é—®ç­”å…¥å£)            PORT 8001
âœ… ai_lite_rag_service      (çŸ¥è¯†åº“æ£€ç´¢)             PORT 8003  
âœ… ai_lite_prompt_service   (æç¤ºè¯ç®¡ç†)             PORT 8002
âœ… ai_lite_agent_service    (ä¼ä¸šç³»ç»Ÿé›†æˆ)           PORT 8004
âœ… ai_lite_integration      (æ•°æ®é›†æˆ)               PORT 8005
âœ… ai_lite_llm_service      (LLM æ¥å£)               PORT 8006
âœ… ai_lite_web_ui           (Web UI ç•Œé¢)            PORT 3000
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
cd /Users/zhao_/Documents/ä¿ä¹åŠ›åŠ /AIå®è·µ/AICommonPlatform
docker-compose -f docker-compose.lite.yml ps
```

### 2ï¸âƒ£ è®¿é—® Web UI

```
ğŸŒ http://localhost:3000
```

### 3ï¸âƒ£ é…ç½® LLM æ¨¡å‹

åœ¨ Web UI ä¸­ï¼š
- èœå• â†’ **LLM æ¨¡å‹ç®¡ç†** â†’ **æ·»åŠ æ–°æ¨¡å‹**
- é€‰æ‹©æä¾›å•†ï¼š
  - **ChatAnywhere** (å…è´¹): https://chatanywhere.com.cn/
  - **OpenAI** (ä»˜è´¹): https://platform.openai.com/

### 4ï¸âƒ£ å¼€å§‹æé—®

åœ¨ Web UI ä¸­è¾“å…¥é—®é¢˜ï¼Œç³»ç»Ÿä¼šï¼š
1. ğŸ“š ä»çŸ¥è¯†åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£
2. ğŸ¤– è°ƒç”¨å·²é…ç½®çš„çœŸå®å¤§æ¨¡å‹
3. âœï¸ ç”Ÿæˆæ™ºèƒ½å›ç­”
4. ğŸ“Š æ˜¾ç¤ºå®Œæ•´çš„å¤„ç†é“¾ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“Š ç³»ç»Ÿç‰¹æ€§

### âœ… å·²å®ç°çš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| çœŸå®å¤§æ¨¡å‹è°ƒç”¨ | âœ… | OpenAI + ChatAnywhere |
| çŸ¥è¯†åº“æ£€ç´¢ | âœ… | 10ä¸ªé¢„ç½®æ–‡æ¡£ |
| Web UI ç•Œé¢ | âœ… | å®Œæ•´çš„ç”¨æˆ·ç•Œé¢ |
| Docker å®¹å™¨åŒ– | âœ… | 8ä¸ªå¾®æœåŠ¡ |
| è½»é‡çº§éƒ¨ç½² | âœ… | SQLite + Redis |
| API æ¥å£ | âœ… | RESTful API |
| é”™è¯¯å¤„ç† | âœ… | å®Œæ•´çš„å¼‚å¸¸å¤„ç† |
| æ—¥å¿—ç³»ç»Ÿ | âœ… | JSON æ ¼å¼æ—¥å¿— |

### ğŸ“š çŸ¥è¯†åº“å†…å®¹ï¼ˆ10ä¸ªæ–‡æ¡£ï¼‰

1. **Q1é”€å”®æŠ¥å‘Š** - é”€å”®ä¸šç»©æ•°æ®
2. **å‘˜å·¥æ‰‹å†Œ** - HR æ”¿ç­–ä¿¡æ¯
3. **æŠ€æœ¯æ¶æ„** - ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
4. **è´¢åŠ¡é¢„ç®—** - é¢„ç®—åˆ†é…æ–¹æ¡ˆ
5. **å®¢æˆ·æ¡ˆä¾‹** - é›¶å”®è¡Œä¸šæˆåŠŸæ¡ˆä¾‹
6. **äº§å“åŠŸèƒ½** - å¹³å°åŠŸèƒ½æ¸…å•
7. **Q2é”€å”®è®¡åˆ’** - é”€å”®ç›®æ ‡å’Œç­–ç•¥
8. **å®‰å…¨æ”¿ç­–** - ä¿¡æ¯å®‰å…¨è§„å®š
9. **æŠ€æœ¯æ ˆ** - ä¾èµ–å’Œç‰ˆæœ¬ä¿¡æ¯
10. **å¸¸è§é—®é¢˜** - FAQ å’Œå¸®åŠ©æ–‡æ¡£

---

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### æµ‹è¯• 1: æŸ¥è¯¢é”€å”®æ•°æ®

```bash
curl -X POST http://localhost:8001/api/qa/ask \
  -H 'Content-Type: application/json' \
  -d '{
    "question": "2024å¹´Q1çš„é”€å”®ä¸šç»©å¦‚ä½•ï¼Ÿ",
    "user_id": "test"
  }'
```

**é¢„æœŸè¿”å›**:
```json
{
  "answer": "2024å¹´Q1é”€å”®ä¸šç»©ï¼šæ€»é”€å”®é¢5000ä¸‡å…ƒï¼ŒåŒæ¯”å¢é•¿15%...",
  "sources": ["erp_system"],
  "confidence": 0.95
}
```

### æµ‹è¯• 2: çŸ¥è¯†åº“æœç´¢

```bash
curl -X POST http://localhost:8003/api/rag/search \
  -H 'Content-Type: application/json' \
  -d '{
    "query": "å‘˜å·¥",
    "top_k": 3
  }'
```

### æµ‹è¯• 3: ç³»ç»Ÿå¥åº·æ£€æŸ¥

```bash
curl http://localhost:8001/health
curl http://localhost:8003/health
curl http://localhost:3000/health
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### å¯åŠ¨æœåŠ¡

```bash
docker-compose -f docker-compose.lite.yml up -d
```

### åœæ­¢æœåŠ¡

```bash
docker-compose -f docker-compose.lite.yml down
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.lite.yml logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.lite.yml logs -f qa_entry
docker-compose -f docker-compose.lite.yml logs -f rag_service
```

### é‡å¯æœåŠ¡

```bash
docker-compose -f docker-compose.lite.yml restart qa_entry
```

### å®Œå…¨æ¸…é™¤ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

```bash
docker-compose -f docker-compose.lite.yml down -v
docker-compose -f docker-compose.lite.yml up -d
```

---

## ğŸ” é…ç½®æŒ‡å—

### è·å– ChatAnywhere API Keyï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰

1. è®¿é—®: https://chatanywhere.com.cn/
2. æ³¨å†Œè´¦å·
3. å¤åˆ¶ API Key
4. åœ¨ Web UI ä¸­é…ç½®ï¼š
   - æä¾›å•†ï¼š`chatanywhere`
   - API Keyï¼šç²˜è´´æ‚¨çš„ Key
   - æ¨¡å‹ï¼š`gpt-3.5-turbo`ï¼ˆæˆ–å…¶ä»–æ”¯æŒçš„æ¨¡å‹ï¼‰

### è·å– OpenAI API Keyï¼ˆç”Ÿäº§æ¨èï¼‰

1. è®¿é—®: https://platform.openai.com/api-keys
2. ç™»å½•æˆ–åˆ›å»ºè´¦å·
3. åˆ›å»ºæ–° API Key
4. åœ¨ Web UI ä¸­é…ç½®ï¼š
   - æä¾›å•†ï¼š`openai`
   - API Keyï¼šç²˜è´´æ‚¨çš„ Key
   - æ¨¡å‹ï¼š`gpt-4` æˆ– `gpt-3.5-turbo`

---

## ğŸ“ˆ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸŒ Web UI (Port 3000)       â”‚
â”‚   ç”¨æˆ·ç•Œé¢ + æ¨¡å‹é…ç½® + æé—®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚RAG æœåŠ¡  â”‚    â”‚QA Entry  â”‚
â”‚(8003)    â”‚    â”‚(8001)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      â”‚                   â”‚
     â–¼      â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   çœŸå® LLM æ¨¡å‹                   â”‚
  â”‚  - OpenAI (GPT-4/3.5)           â”‚
  â”‚  - ChatAnywhere (GPT/Claude)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²
     â”‚
  â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  çŸ¥è¯†åº“ (10æ–‡æ¡£)         â”‚
  â”‚  - é”€å”®  - å‘˜å·¥          â”‚
  â”‚  - æŠ€æœ¯  - è´¢åŠ¡          â”‚
  â”‚  - å®¢æˆ·  - äº§å“          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæé—®æ—¶å‡ºç°é”™è¯¯

**åŸå› å¯èƒ½**:
1. LLM æ¨¡å‹æœªé…ç½®
2. API Key æœ‰è¯¯
3. ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Web UI ä¸­æ˜¯å¦é…ç½®äº†æ¨¡å‹
2. éªŒè¯ API Key æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ—¥å¿—ï¼š`docker-compose -f docker-compose.lite.yml logs qa_entry`

### é—®é¢˜ï¼šå®¹å™¨æ— æ³•å¯åŠ¨

**åŸå› å¯èƒ½**:
1. ç«¯å£è¢«å ç”¨
2. Docker èµ„æºä¸è¶³
3. ä¾èµ–é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†æ‰€æœ‰å®¹å™¨å’Œå·
docker-compose -f docker-compose.lite.yml down -v

# é‡æ–°å¯åŠ¨
docker-compose -f docker-compose.lite.yml up -d
```

### é—®é¢˜ï¼šçŸ¥è¯†åº“æœç´¢è¿”å›ç©ºç»“æœ

**åŸå› **:
- æœç´¢è¯ä¸æ–‡æ¡£å†…å®¹ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
1. å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯
2. æŸ¥çœ‹çŸ¥è¯†åº“æ–‡æ¡£ï¼š
   ```bash
   curl http://localhost:8003/api/rag/documents
   ```
3. åœ¨ Web UI ä¸­ä¸Šä¼ è‡ªå®šä¹‰æ–‡æ¡£

---

## ğŸ“š API æ–‡æ¡£

### QA Entry æœåŠ¡

#### æé—®æ¥å£

```
POST /api/qa/ask
Content-Type: application/json

{
  "question": "ç”¨æˆ·é—®é¢˜",
  "user_id": "ç”¨æˆ·ID"
}
```

**å“åº”**:
```json
{
  "answer": "å›ç­”å†…å®¹",
  "sources": ["æ¥æº1", "æ¥æº2"],
  "confidence": 0.95
}
```

### RAG æœåŠ¡

#### æœç´¢çŸ¥è¯†åº“

```
POST /api/rag/search
Content-Type: application/json

{
  "query": "æœç´¢è¯",
  "top_k": 5,
  "category": "åˆ†ç±»"
}
```

#### è·å–æ–‡æ¡£åˆ—è¡¨

```
GET /api/rag/documents
```

#### è·å–ç»Ÿè®¡ä¿¡æ¯

```
GET /api/rag/stats
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥æ—¥å¿—

```bash
docker-compose -f docker-compose.lite.yml logs --tail 100 qa_entry
```

### 2. ç›‘æ§èµ„æºä½¿ç”¨

```bash
docker stats ai_lite_qa_entry ai_lite_rag_service
```

### 3. å®šæœŸæ›´æ–°ä¾èµ–

```bash
docker-compose -f docker-compose.lite.yml build --no-cache
```

### 4. å¤‡ä»½çŸ¥è¯†åº“

```bash
# å¦‚æœä½¿ç”¨äº†å·ï¼Œå®šæœŸå¤‡ä»½
docker volume ls
```

---

## ğŸ“ è¿›ä¸€æ­¥ä¼˜åŒ–

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

- [ ] æ·»åŠ æ›´å¤šæµ‹è¯•æ–‡æ¡£
- [ ] ä¼˜åŒ–æœç´¢ç®—æ³•
- [ ] æ”¹è¿› UI ç•Œé¢

### ä¸­æœŸï¼ˆ1-3 ä¸ªæœˆï¼‰

- [ ] é›†æˆ Milvus å‘é‡åº“
- [ ] å®ç°å¤šè½®å¯¹è¯
- [ ] æ·»åŠ ç”¨æˆ·æƒé™æ§åˆ¶

### é•¿æœŸï¼ˆ3-6 ä¸ªæœˆï¼‰

- [ ] æ”¯æŒæ›´å¤š LLM æä¾›å•†
- [ ] å®ç°æ¨¡å‹å¾®è°ƒ
- [ ] å®Œæ•´çš„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
- [ ] Kubernetes éƒ¨ç½²

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹å®Œæ•´æ–‡æ¡£

- `DOCKER_DEPLOYMENT_GUIDE.md` - Docker éƒ¨ç½²è¯¦ç»†æŒ‡å—
- `CHATANYWHERE_INTEGRATION.md` - ChatAnywhere é›†æˆæŒ‡å—
- `QA_LLM_INTEGRATION.md` - LLM é›†æˆæŠ€æœ¯æ–‡æ¡£
- `IMPROVEMENT_SUMMARY.md` - ç³»ç»Ÿæ”¹è¿›æ€»ç»“

### å¸¸ç”¨èµ„æº

- [Docker æ–‡æ¡£](https://docs.docker.com/)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [OpenAI API æ–‡æ¡£](https://platform.openai.com/docs)

---

## âœ¨ æ€»ç»“

æ‚¨ç°åœ¨æ‹¥æœ‰ï¼š

âœ… **åŠŸèƒ½å®Œæ•´çš„ AI é—®ç­”å¹³å°**
- 8 ä¸ªå¾®æœåŠ¡ååŒå·¥ä½œ
- çœŸå®çš„å¤§æ¨¡å‹é›†æˆ
- å®Œæ•´çš„ RAG æµç¨‹
- Web ç”¨æˆ·ç•Œé¢

âœ… **çµæ´»çš„éƒ¨ç½²æ–¹æ¡ˆ**
- Docker å®¹å™¨åŒ–
- è½»é‡çº§é…ç½®
- æœ¬åœ°è¿è¡Œæ–¹ä¾¿
- æ˜“äºæ‰©å±•

âœ… **ç”Ÿäº§çº§åˆ«çš„è´¨é‡**
- é”™è¯¯å¤„ç†å®Œå–„
- æ—¥å¿—ç³»ç»Ÿå¥å…¨
- API æ¥å£è§„èŒƒ
- å®‰å…¨æ€§è€ƒè™‘

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³å¼€å§‹ä½¿ç”¨**:
   ```bash
   open http://localhost:3000
   ```

2. **é…ç½®æ‚¨çš„ LLM**:
   - é€‰æ‹© ChatAnywhere æˆ– OpenAI
   - å¡«å…¥ API Key
   - è®¾ç½®ä¸ºé»˜è®¤æ¨¡å‹

3. **è¿›è¡Œæµ‹è¯•æé—®**:
   - æé—®é”€å”®ç›¸å…³é—®é¢˜
   - æŸ¥è¯¢å‘˜å·¥æ”¿ç­–
   - æœç´¢æŠ€æœ¯æ–‡æ¡£

4. **ä¸Šä¼ è‡ªå®šä¹‰æ–‡æ¡£**:
   - åœ¨ Web UI ä¸­ä¸Šä¼ 
   - æˆ–é€šè¿‡ API æ·»åŠ 

---

**ç‰ˆæœ¬**: v1.2.0  
**éƒ¨ç½²æ—¶é—´**: 2026-01-27  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

ğŸ‰ **æ­å–œï¼æ‚¨çš„ AI é—®ç­”å¹³å°å·²å‡†å¤‡å¥½æœåŠ¡ï¼**
